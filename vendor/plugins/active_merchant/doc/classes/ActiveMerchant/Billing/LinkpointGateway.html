<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: ActiveMerchant::Billing::LinkpointGateway</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">ActiveMerchant::Billing::LinkpointGateway</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../../files/lib/active_merchant/billing/gateways/linkpoint_rb.html">
                lib/active_merchant/billing/gateways/linkpoint.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                <a href="Gateway.html">
                Gateway
               </a>
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
Initialization Options :login Your store number :pem The text of your
linkpoint PEM file. Note
</p>
<pre>
                      this is not the path to file, but its
                      contents. If you are only using one PEM
                      file on your site you can declare it
                      globally and then you won't need to
                      include this option
</pre>
<p>
A valid store number is required. Unfortunately, with LinkPoint YOU
CAN&#8216;T JUST USE ANY OLD STORE NUMBER. Also, you can&#8217;t just
generate your own PEM file. You&#8216;ll need to use a special PEM file
provided by LinkPoint.
</p>
<p>
Go to <a
href="http://www.linkpoint.com/support/sup_teststore.asp">www.linkpoint.com/support/sup_teststore.asp</a>
to set up a test account and obtain your PEM file.
</p>
<p>
Declaring PEM file Globally
ActiveMerchant::Billing::LinkpointGateway.pem_file = File.read(
File.dirname(<em>FILE</em>) + &#8217;/../mycert.pem&#8217; )
</p>
<p>
Valid Order Options :result =&gt;
</p>
<pre>
  LIVE                  Production mode
  GOOD                  Approved response in test mode
  DECLINE               Declined response in test mode
  DUPLICATE             Duplicate response in test mode
</pre>
<p>
:ponumber Order number
</p>
<p>
:transactionorigin =&gt; Source of the transaction
</p>
<pre>
   ECI                  Email or Internet
   MAIL                 Mail order
   MOTO                 Mail order/Telephone
   TELEPHONE            Telephone
   RETAIL               Face-to-face
</pre>
<p>
:ordertype =&gt;
</p>
<pre>
   SALE                 Real live sale
   PREAUTH              Authorize only
   POSTAUTH             Forced Ticket or Ticket Only transaction
   VOID
   CREDIT
   CALCSHIPPING         For shipping charges calculations
   CALCTAX              For sales tax calculations
</pre>
<p>
Recurring Options :action =&gt;
</p>
<pre>
   SUBMIT
   MODIFY
   CANCEL
</pre>
<p>
:installments Identifies how many recurring payments to charge the customer
:startdate Date to begin charging the recurring payments. Format: YYYYMMDD
or &quot;immediate&quot; :periodicity =&gt;
</p>
<pre>
    MONTHLY
    BIMONTHLY
    WEEKLY
    BIWEEKLY
    YEARLY
    DAILY
</pre>
<p>
:threshold Tells how many times to retry the transaction (if it fails)
before contacting the merchant. :comments Uh&#8230; comments
</p>
<p>
For reference:
</p>
<p>
<a
href="https://www.linkpointcentral.com/lpc/docs/Help/APIHelp/lpintguide.htm">www.linkpointcentral.com/lpc/docs/Help/APIHelp/lpintguide.htm</a>
</p>
<pre>
 Entities = {
   :payment =&gt; [:subtotal, :tax, :vattax, :shipping, :chargetotal],
   :billing =&gt; [:name, :address1, :address2, :city, :state, :zip, :country, :email, :phone, :fax, :addrnum],
   :shipping =&gt; [:name, :address1, :address2, :city, :state, :zip, :country, :weight, :items, :carrier, :total],
   :creditcard =&gt; [:cardnumber, :cardexpmonth, :cardexpyear, :cvmvalue, :track],
   :telecheck =&gt; [:routing, :account, :checknumber, :bankname, :bankstate, :dl, :dlstate, :void, :accounttype, :ssn],
   :transactiondetails =&gt; [:transactionorigin, :oid, :ponumber, :taxexempt, :terminaltype, :ip, :reference_number, :recurring, :tdate],
   :periodic =&gt; [:action, :installments, :threshold, :startdate, :periodicity, :comments],
   :notes =&gt; [:comments, :referred]
 }
</pre>
<p>
IMPORTANT NOTICE:
</p>
<p>
LinkPoint&#8217;s Items entity is not yet supported in this module.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000171">authorize</a>&nbsp;&nbsp;
      <a href="#M000172">capture</a>&nbsp;&nbsp;
      <a href="#M000173">credit</a>&nbsp;&nbsp;
      <a href="#M000168">new</a>&nbsp;&nbsp;
      <a href="#M000170">purchase</a>&nbsp;&nbsp;
      <a href="#M000169">recurring</a>&nbsp;&nbsp;
      <a href="#M000174">supported_cardtypes</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">


    <div id="constants-list">
      <h3 class="section-bar">Constants</h3>

      <div class="name-list">
        <table summary="Constants">
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">TEST_URL</td>
          <td>=</td>
          <td class="context-item-value">'https://staging.linkpt.net:1129/'</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">LIVE_URL</td>
          <td>=</td>
          <td class="context-item-value">'https://secure.linkpt.net:1129/'</td>
        </tr>
        </table>
      </div>
    </div>



    <div id="attribute-list">
      <h3 class="section-bar">Attributes</h3>

      <div class="name-list">
        <table>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">options</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">response</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        </table>
      </div>
    </div>
      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000168" class="method-detail">
        <a name="M000168"></a>

        <div class="method-heading">
          <a href="#M000168" class="method-signature">
          <span class="method-name">new</span><span class="method-args">(options={})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000168-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000168-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_merchant/billing/gateways/linkpoint.rb, line 131</span>
131:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">options</span>={})
132:         <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">:login</span>)
133:         
134:         <span class="ruby-ivar">@options</span> = {
135:           <span class="ruby-identifier">:store_number</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:login</span>],
136:           <span class="ruby-identifier">:result</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">test?</span> <span class="ruby-value">? </span><span class="ruby-value str">&quot;GOOD&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-value str">&quot;LIVE&quot;</span>
137:         }.<span class="ruby-identifier">update</span>(<span class="ruby-identifier">options</span>)
138:         
139:         <span class="ruby-ivar">@pem</span> = <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:pem</span>] <span class="ruby-operator">||</span> <span class="ruby-constant">LinkpointGateway</span>.<span class="ruby-identifier">pem_file</span>
140:         
141:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;You need to pass in your pem file using the :pem parameter or set it globally using ActiveMerchant::Billing::LinkpointGateway.pem_file = File.read( File.dirname(__FILE__) + '/../mycert.pem' ) or similar&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@pem</span>.<span class="ruby-identifier">nil?</span>
142:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000174" class="method-detail">
        <a name="M000174"></a>

        <div class="method-heading">
          <a href="#M000174" class="method-signature">
          <span class="method-name">supported_cardtypes</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000174-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000174-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_merchant/billing/gateways/linkpoint.rb, line 227</span>
227:       <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">supported_cardtypes</span>
228:         [<span class="ruby-identifier">:visa</span>, <span class="ruby-identifier">:master</span>, <span class="ruby-identifier">:discover</span>, <span class="ruby-identifier">:american_express</span>]
229:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000171" class="method-detail">
        <a name="M000171"></a>

        <div class="method-heading">
          <a href="#M000171" class="method-signature">
          <span class="method-name">authorize</span><span class="method-args">(money, creditcard, options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Authorize the transaction
</p>
<p>
Reserves the funds on the customer&#8217;s credit card, but does not charge
the card.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000171-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000171-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_merchant/billing/gateways/linkpoint.rb, line 191</span>
191:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">authorize</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">creditcard</span>, <span class="ruby-identifier">options</span> = {})
192:         <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">:order_id</span>)
193:         <span class="ruby-identifier">options</span>.<span class="ruby-identifier">update</span>({
194:                       <span class="ruby-identifier">:ordertype</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;PREAUTH&quot;</span>
195:                      })
196:         <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">creditcard</span>, <span class="ruby-identifier">options</span>)
197:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000172" class="method-detail">
        <a name="M000172"></a>

        <div class="method-heading">
          <a href="#M000172" class="method-signature">
          <span class="method-name">capture</span><span class="method-args">(money, authorization, options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Post an authorization.
</p>
<p>
Captures the funds from an authorized transaction. Order_id must be a valid
order id from a prior authorized transaction.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000172-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000172-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_merchant/billing/gateways/linkpoint.rb, line 205</span>
205:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">capture</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">authorization</span>, <span class="ruby-identifier">options</span> = {})
206:         <span class="ruby-identifier">options</span>.<span class="ruby-identifier">update</span>({
207:                       <span class="ruby-identifier">:order_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">authorization</span>,
208:                       <span class="ruby-identifier">:ordertype</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;POSTAUTH&quot;</span>
209:                      })
210:         <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">money</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">options</span>)  
211:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000173" class="method-detail">
        <a name="M000173"></a>

        <div class="method-heading">
          <a href="#M000173" class="method-signature">
          <span class="method-name">credit</span><span class="method-args">(money, creditcard, options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Refund an order
</p>
<p>
Order_id must be a valid order id previously submitted by SALE
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000173-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000173-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_merchant/billing/gateways/linkpoint.rb, line 218</span>
218:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">credit</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">creditcard</span>, <span class="ruby-identifier">options</span> = {})
219:         <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">:order_id</span>)
220:         <span class="ruby-identifier">options</span>.<span class="ruby-identifier">update</span>({
221:                       <span class="ruby-identifier">:ordertype</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;CREDIT&quot;</span>
222:                      })
223:         <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">creditcard</span>, <span class="ruby-identifier">options</span>)
224:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000170" class="method-detail">
        <a name="M000170"></a>

        <div class="method-heading">
          <a href="#M000170" class="method-signature">
          <span class="method-name">purchase</span><span class="method-args">(money, creditcard, options={})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Buy the thing
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000170-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000170-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_merchant/billing/gateways/linkpoint.rb, line 178</span>
178:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">purchase</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">creditcard</span>, <span class="ruby-identifier">options</span>={})
179:         <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">:order_id</span>)
180:         <span class="ruby-identifier">options</span>.<span class="ruby-identifier">update</span>({
181:                       <span class="ruby-identifier">:ordertype</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;SALE&quot;</span>
182:                      })
183:         <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">creditcard</span>, <span class="ruby-identifier">options</span>)
184:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000169" class="method-detail">
        <a name="M000169"></a>

        <div class="method-heading">
          <a href="#M000169" class="method-signature">
          <span class="method-name">recurring</span><span class="method-args">(money, creditcard, options={})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Send a purchase request with periodic options Recurring Options :action
=&gt;
</p>
<pre>
   SUBMIT
   MODIFY
   CANCEL
</pre>
<p>
:installments Identifies how many recurring payments to charge the customer
:startdate Date to begin charging the recurring payments. Format: YYYYMMDD
or &quot;immediate&quot; :periodicity =&gt;
</p>
<pre>
    :monthly
    :bimonthly
    :weekly
    :biweekly
    :yearly
    :daily
</pre>
<p>
:threshold Tells how many times to retry the transaction (if it fails)
before contacting the merchant. :comments Uh&#8230; comments
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000169-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000169-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_merchant/billing/gateways/linkpoint.rb, line 163</span>
163:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">recurring</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">creditcard</span>, <span class="ruby-identifier">options</span>={})
164:         <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, [<span class="ruby-identifier">:periodicity</span>, <span class="ruby-identifier">:bimonthly</span>, <span class="ruby-identifier">:monthly</span>, <span class="ruby-identifier">:biweekly</span>, <span class="ruby-identifier">:weekly</span>, <span class="ruby-identifier">:yearly</span>, <span class="ruby-identifier">:daily</span>], <span class="ruby-identifier">:installments</span>, <span class="ruby-identifier">:order_id</span> )
165:         
166:         <span class="ruby-identifier">options</span>.<span class="ruby-identifier">update</span>({<span class="ruby-identifier">:ordertype</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;SALE&quot;</span>,
167:                       <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;SUBMIT&quot;</span>,
168:                       <span class="ruby-identifier">:installments</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:installments</span>] <span class="ruby-operator">||</span> <span class="ruby-value">12</span>,
169:                       <span class="ruby-identifier">:startdate</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:startdate</span>] <span class="ruby-operator">||</span> <span class="ruby-value str">&quot;immediate&quot;</span>,
170:                       <span class="ruby-identifier">:periodicity</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:periodicity</span>].<span class="ruby-identifier">to_s</span> <span class="ruby-operator">||</span> <span class="ruby-value str">&quot;monthly&quot;</span>,
171:                       <span class="ruby-identifier">:comments</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:comments</span>] <span class="ruby-operator">||</span> <span class="ruby-keyword kw">nil</span>,
172:                       <span class="ruby-identifier">:threshold</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:threshold</span>] <span class="ruby-operator">||</span> <span class="ruby-value">3</span>
173:                       })
174:         <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">creditcard</span>, <span class="ruby-identifier">options</span>)
175:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>