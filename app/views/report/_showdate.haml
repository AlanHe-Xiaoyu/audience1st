- s = showdate.class
- divid = "#{s}_#{showdate.id}"
%table.hilite.totalShowSales
  %tr.showSalesRow
    %td.showSalesDate{:style=>'width: 20em;'}
      - hdr ||= "#{showdate.printable_date} (#{showdate.max_allowed_sales})"
      = link_to_remote(hdr, :update=> divid, |
        :url=>{:action=>"showdate_sales",:id=>showdate,:klass=>s}, |
        :before => "Element.show('wait_#{divid}')", |
        :complete=> visual_effect(:toggle_slide,divid,:duration=>0.5) + "Element.hide('wait_#{divid}');") |
      = spinner("wait_#{divid}")
    %td.showSalesDateQty= showdate.vouchers.size
    - p1 = number_to_percentage(showdate.percent_sold,:precision=>0)
    - p2 = number_to_percentage(showdate.percent_of_house, :precision => 0)
    - if showdate.max_allowed_sales == showdate.house_capacity
      %td.showSalesDatePercent= p1
    - else
      %td.showSalesDatePercent= "#{p1} (#{p2} house)"
    %td.currency.showSalesDateRevenue= number_to_currency(showdate.revenue)

%div{:id=>divid,:style=>"display: none;"}


