#ticket_menus_inner
  = javascript_recalc_function :total, |
      @vouchertypes.map {|av| av.vouchertype.id}, |
     :price, :vouchertype, 'donation', 'submit' |

  %label{:for => "show"} Show
  = select_tag('show', options_with_default(@sh, @all_shows))
  = spinner('wait_show')
  %br/

  %label{:for => "showdate"} Date
  = select_tag('showdate', options_with_default(@sd, @all_showdates))
  = spinner('wait_showdate')
  %br/

  #voucher_menus
    - if @vouchertypes.empty? && @sd

      %p.explanation No tickets on sale for this performance

    - else

      - ticket_menus(@vouchertypes) do |vid,name,qty,price|
        %label{:for => "vouchertype[#{vid}]"}= name
        = select_tag("vouchertype[#{vid}]", options_for_select(qty), :onChange => 'recalc_total()')
        %br/
        = hidden_field_tag "price[#{vid}]", price

    - unless @vouchertypes.empty?
      %label.emphasis ADA-accessible seating required?
      = checkbox_guard_for 'comments_div', !(@cart.comments.blank?)
      #comments_div{:style => @cart.comments.blank? ? 'display: none' : ''}
        %label{:for => :comments} Please describe (wheelchair, walker, cane, etc.)
        = text_area_tag('comments', @cart.comments, :rows => 1, :cols => 30)

  = hidden_field_tag 'redirect_to', 'index'
  = watch_show_and_showdate_fields
  = watch_comment_field
