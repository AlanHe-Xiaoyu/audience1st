!!! Strict
%html{:xmlns=>"http://www.w3.org/1999/xhtml","xml:lang"=>:en,:lang=>:en}
  %head
    = stylesheet_link_tag 'venue/default', :media => 'all'
    = stylesheet_link_tag 'vbo', :media => 'all'
    = javascript_include_tag :defaults

    %title= @page_title || sprintf("%s: %s", controller.controller_name.capitalize,controller.action_name.humanize)
    %meta{'http-equiv'=>'content-type', :content=>'text/html; charset=utf-8'}/
    %meta{'http-equiv'=>:imagetoolbar, :content=>:no}/
    %meta{:name=>:description, :content=>''}/

  %body{:id=>"#{h(controller.controller_name)}_#{h(controller.action_name)}", :class=>(SANDBOX ? :testing : nil)}

    #outer_wrapper
      #header
      #nav
        - if @gCustomer
          = render :partial => 'layouts/login_banner'
          - tabs = [['Buy Tickets', :store, :index], |
            ['My Tickets', :customers, :welcome], |
            ['Billing Address', :customers, :edit], |
            ['Change Password', :customers, :change_password]] |
          - if @gAdmin.is_staff
            - tabs +=    |
              [['Shows', :shows, :list], |
              ['Vouchers', :vouchertypes, :list], |
              ['Reports', :report, :index], |
              ['Box Office', :box_office, :walkup], |
              ['Donations', :donation, :list], |
              ['Settings', :options, :edit]] |
          %ul#store_nav= nav_tabs 'store_nav', tabs
          - if @gAdmin.is_staff
            = render :partial => 'customers/quick_search'
            = render :partial => 'messages/staff_buttons' if controller.controller_name == 'customers'

          - else
            %br.clear

      #inner_wrapper
        %br.clear
        = render :partial => 'messages/notice' unless flash[:notice].blank?
        = render :partial => 'messages/warning' unless flash[:warning].blank?
        = render :partial => 'store/checkout_error' unless flash[:checkout_error].blank?
        - if @gCheckoutInProgress
          %h1.center Your Order So Far
          = render :partial => 'store/cart', :locals => {:editable => false,:cart=>@gCart}
        = yield

    = render :partial => 'layouts/footer'
